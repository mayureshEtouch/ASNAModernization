/*
 selectRow(next_row.get(0)) selectRow(prev_row.get(0))*/
jQuery.extendedNavigation={settings:null,internal_event_hanlders:{},tables:[]};
jQuery.tableNavigation=function(settings){if(jQuery.extendedNavigation.settings==null)jQuery.extendedNavigation.settings=jQuery.extend({table_selector:"table.navigateable",row_selector:"table.navigateable tbody tr",selected_class:"selected",activation_selector:"a.activation",bind_key_events_to_links:true,focus_links_on_select:true,select_event:"click",activate_event:"dblclick",activation_element_activate_event:"click",scroll_overlap:20,cookie_name:"last_selected_row_index",focus_tables:true,focused_table_class:"focused",
jump_between_tables:true,disabled:false,on_activate:null,on_select:null},settings);else{jQuery.extendedNavigation.settings=jQuery.extend(jQuery.extendedNavigation.settings,settings);jQuery.extendedNavigation.tables=jQuery(jQuery.extendedNavigation.settings.table_selector);bindInternalEventHandlers();return}jQuery(document).ready(function(){defineInternalEventHandlers();jQuery.extendedNavigation.tables=jQuery(jQuery.extendedNavigation.settings.table_selector);bindInternalEventHandlers();$("body").keyup(function(event){if(!event.target.hasAttribute("type")){var row=
navigateTable(event);jQuery.extendedNavigation.settings.onRowChange(row)}})});function defineInternalEventHandlers(){jQuery.extendedNavigation.internal_event_hanlders.click=function(){if(jQuery.extendedNavigation.settings.disabled)return;selectRow(this)};jQuery.extendedNavigation.internal_event_hanlders.dblclick=function(){if(jQuery.extendedNavigation.settings.disabled)return;activateRow(this)};jQuery.extendedNavigation.internal_event_hanlders.activation_link_click=function(){if(jQuery.extendedNavigation.settings.disabled)return;
activateRow(jQuery(this).parents("tr").get(0));return false};jQuery.extendedNavigation.internal_event_hanlders.activation_link_focus=function(){if(jQuery.extendedNavigation.settings.disabled)return;selectRow(jQuery(this).parents("tr").get(0))}}function bindInternalEventHandlers(){var selectable_rows=jQuery(jQuery.extendedNavigation.settings.row_selector);var selected_row=selectable_rows.filter("."+jQuery.extendedNavigation.settings.selected_class);if(selected_row.size()==0&&selectable_rows.size()>
0){var index_to_select=readLastRowIndex();if(!index_to_select){eraseLastRowIndexCookie();index_to_select=0}var row_to_select=selectable_rows.get(index_to_select);if(row_to_select)selectRow(row_to_select)}selectable_rows.bind(jQuery.extendedNavigation.settings.select_event,{},jQuery.extendedNavigation.internal_event_hanlders.click);selectable_rows.bind(jQuery.extendedNavigation.settings.activate_event,{},jQuery.extendedNavigation.internal_event_hanlders.dblclick);var activation_element=selectable_rows.find(jQuery.extendedNavigation.settings.activation_selector);
if(activation_element&&jQuery.extendedNavigation.settings.activation_element_activate_event)selectable_rows.find(jQuery.extendedNavigation.settings.activation_selector).bind(jQuery.extendedNavigation.settings.activation_element_activate_event,{},jQuery.extendedNavigation.internal_event_hanlders.activation_link_click);activation_element.focus(jQuery.extendedNavigation.internal_event_hanlders.activation_link_focus);if(jQuery.extendedNavigation.settings.bind_key_events_to_links)var bind_to=jQuery.extendedNavigation.settings.row_selector+
" "+jQuery.extendedNavigation.settings.activation_selector;else var bind_to=document;if(jQuery.browser.msie)jQuery(bind_to).keydown(jQuery.extendedNavigation.internal_event_hanlders.keypress);else jQuery(bind_to).keypress(jQuery.extendedNavigation.internal_event_hanlders.keypress)}function selectRow(row){if(row!=undefined&&row.nodeName.toLowerCase()=="tr"){var do_default_action=executeEventHandler(row,jQuery.extendedNavigation.settings.on_select);if(do_default_action){getSelectedRow().removeClass(jQuery.extendedNavigation.settings.selected_class);
jQuery(row).addClass(jQuery.extendedNavigation.settings.selected_class);if(jQuery.extendedNavigation.settings.focus_links_on_select){var activation_element=jQuery(row).find(jQuery.extendedNavigation.settings.activation_selector)[0];if(activation_element!=null)activation_element.focus()}if(jQuery.extendedNavigation.settings.focus_tables){jQuery.extendedNavigation.tables.removeClass(jQuery.extendedNavigation.settings.focused_table_class);jQuery(row).parents(jQuery.extendedNavigation.settings.table_selector).eq(0).addClass(jQuery.extendedNavigation.settings.focused_table_class)}scrollToIfNeccessary(row)}return true}return false}
function getSelectedRow(){return jQuery(jQuery.extendedNavigation.settings.row_selector+"."+jQuery.extendedNavigation.settings.selected_class)}function activateRow(row){if(row!=undefined){selectRow(row);var activated_index=jQuery(jQuery.extendedNavigation.settings.row_selector).index(row);storeLastRowIndex(activated_index);var do_default_action=executeEventHandler(row,jQuery.extendedNavigation.settings.on_activate);if(do_default_action){var activation_link=jQuery(jQuery.extendedNavigation.settings.activation_selector,
row);if(activation_link.size()==1){var href_of_activation_link=activation_link.attr("href");if(href_of_activation_link!=undefined)window.location.href=href_of_activation_link}}}}function executeEventHandler(row,action){if(typeof action=="function")return action(row);else if(/^on/.test(action))try{var onclick_of_target_link=jQuery(jQuery.extendedNavigation.settings.activation_selector,row).attr(action);if(eval(onclick_of_target_link)==false)return false;else return true}catch(e){return true}else if(typeof action==
"string")try{if(eval(action)==false)return false;else return true}catch(e$0){return true}return true}function scrollToIfNeccessary(e){var viewport_dimensions=getScroll();var viewport={top:viewport_dimensions.t,left:viewport_dimensions.l,height:viewport_dimensions.ih,width:viewport_dimensions.iw};var element_position=getPos(e);var calculated_boundaries={top:element_position.y-jQuery.extendedNavigation.settings.scroll_overlap,bottom:element_position.y+element_position.hb+jQuery.extendedNavigation.settings.scroll_overlap,
left:element_position.x-jQuery.extendedNavigation.settings.scroll_overlap,right:element_position.x+element_position.wb+jQuery.extendedNavigation.settings.scroll_overlap};var scroll_to_x=viewport.left;var scroll_to_y=viewport.top;if(viewport.top+viewport.height<calculated_boundaries.bottom)scroll_to_y=calculated_boundaries.bottom-viewport.height;if(viewport.top>calculated_boundaries.top)scroll_to_y=calculated_boundaries.top;if(viewport.left+viewport.width<calculated_boundaries.left)scroll_to_x=calculated_boundaries.right-
viewport.width;if(viewport.left>calculated_boundaries.left)scroll_to_x=calculated_boundaries.left;window.scrollTo(scroll_to_x,scroll_to_y)}function readLastRowIndex(){if(jQuery.extendedNavigation.settings.cookie_name){var data=readCookie(jQuery.extendedNavigation.settings.cookie_name);if(data){var data_elements=data.split(",");var last_index=data_elements[0];var last_href=data_elements[1];if(window.location.href==last_href)return last_index}}return null}function storeLastRowIndex(index){if(jQuery.extendedNavigation.settings.cookie_name){var data=
""+index+","+window.location.href;createCookie(jQuery.extendedNavigation.settings.cookie_name,data)}}function eraseLastRowIndexCookie(){eraseCookie(jQuery.extendedNavigation.settings.cookie_name)}function createCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1E3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");
for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){createCookie(name,"",-1)}function getPos(e,s){var l=0;var t=0;var sl=0;var st=0;var w=jQuery.css(e,"width");var h=jQuery.css(e,"height");var wb=e.offsetWidth;var hb=e.offsetHeight;while(e.offsetParent){l+=e.offsetLeft+(e.currentStyle?parseInt(e.currentStyle.borderLeftWidth)||0:0);t+=e.offsetTop+(e.currentStyle?
parseInt(e.currentStyle.borderTopWidth)||0:0);if(s){sl+=e.parentNode.scrollLeft||0;st+=e.parentNode.scrollTop||0}e=e.offsetParent}l+=e.offsetLeft+(e.currentStyle?parseInt(e.currentStyle.borderLeftWidth)||0:0);t+=e.offsetTop+(e.currentStyle?parseInt(e.currentStyle.borderTopWidth)||0:0);st=t-st;sl=l-sl;return{x:l,y:t,sx:sl,sy:st,w:w,h:h,wb:wb,hb:hb}}function getScroll(e){if(e){t=e.scrollTop;l=e.scrollLeft;w=e.scrollWidth;h=e.scrollHeight;iw=0;ih=0}else{if(document.documentElement&&document.documentElement.scrollTop){t=
document.documentElement.scrollTop;l=document.documentElement.scrollLeft;w=document.documentElement.scrollWidth;h=document.documentElement.scrollHeight}else if(document.body){t=document.body.scrollTop;l=document.body.scrollLeft;w=document.body.scrollWidth;h=document.body.scrollHeight}iw=self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0;ih=self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}return{t:t,l:l,w:w,h:h,iw:iw,ih:ih}}function navigateTable(e){if(e){var key_code=
e.keyCode;switch(key_code){case 40:case 39:var next_row=getSelectedRow().next();if(next_row.length>0&&$(next_row).attr("id")!=="CenPH__lb_SFLRCD__End_New"){var r=!selectRow(next_row.get(0));return{"r":r,"row":next_row,"keycode":"40"}}else if(jQuery.extendedNavigation.settings.jump_between_tables){var current_table=getSelectedRow().parents(jQuery.extendedNavigation.settings.table_selector).get(0);var all_tables=jQuery.extendedNavigation.tables;all_tables.each(function(index){if(this!=current_table){var next_table=
all_tables.eq(index+1);if(next_table!=undefined)next_row=next_table.find("tbody tr:first")}});return{"r":true,"row":next_row,"keycode":"40"}}break;case 38:case 37:var prev_row=getSelectedRow().prev();if(prev_row.length>0&&$(prev_row).attr("id")!=="CenPH__lb_SFLRCD__End_New")return{"r":!selectRow(prev_row.get(0)),"row":prev_row,"keycode":"38"};else if(jQuery.extendedNavigation.settings.jump_between_tables){var current_table=getSelectedRow().parents(jQuery.extendedNavigation.settings.table_selector).get(0);
var all_tables=jQuery.extendedNavigation.tables;all_tables.each(function(index){if(this!=current_table){var prev_table=all_tables.eq(index-1);if(prev_table!=undefined)prev_row=prev_table.find("tbody tr:last")}});return{"r":true,"row":prev_row,"keycode":"38"}}break;case 13:activateRow(getSelectedRow().get(0));break}}}};